<div th:fragment="studentFrame" class="studentFrame" >
    <div class="frameHeader" id="frameHeader">
        <div class="updateFrame" id="updateFrame" style="display: flex;">
            <p class="classTitle" name="classTitle"></p>
                <button class="updateFrameIcon" id="updateFrameIcon" >
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                </button>
        </div>
        <form th:action="@{/updateClassroom}" class="updateFrame" id="updateForm" method="post" style="display: none;">
            <input class="classNameInput" id="classNameInput" name = "newClassroomName" value=  >
            <button class="renameClassBtn" name="classNameModify" type="submit" value='classNameBtn' >OK</button>
        </form>
        <div class="deleteFrame" id="deleteFrame" >
                <!-- Button trigger modal -->
                <button class="deleteFrameIcon" data-toggle="modal" data-target="#exampleModalCenter">
                    <i class="fa fa-trash" aria-hidden="true" ></i>
                </button>
        </div>
            <!-- Modal -->
            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <form th:action="@{/deleteClassroom}" method="post">
                        <div class="modal-header">
<!--                            <h5 class="modal-title" id="exampleModalCenterTitle">You are going to delete a classroom</h5>-->
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body text-danger">
                            <p>Are you sure that you want to delete this classroom?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button"  class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary classDelete" name="classDelete">Delete</button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>


    <div class="frameBody" id="frameBody">
        <ul th:each="student: ${students}">
            <li  id="userIdStore">
                <p th:text="${student.getUser_name()}" th:value="${student.getUser_name()}"></p>
                <button class="deleteIcon" data-toggle="modal" data-target="#deleteStudent" th:value="${student.getUser_id()}">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                </button>
            </li>
        </ul>
    </div>

    <div class="modal fade" id="deleteStudent" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <form th:action="@{/deleteStudent}" method="post">
                    <div class="modal-header">
                        <!--                            <h5 class="modal-title" id="exampleModalCenterTitle">You are going to delete a classroom</h5>-->
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body text-danger">
                        <p>Are you sure that you want to delete this classroom?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button"  class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary studentDelete" name="studentDelete">Delete</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function (){
            console.log("before clicking item")
            console.log("item clicked")
            var nameValue = $("#studentFrame").attr("value")

            $('.classTitle').text(nameValue)
            $(".classDelete").attr("value", nameValue)
            $(".renameClassBtn").attr("value",nameValue)

        });
        $(".deleteIcon").on("click", function(){
            var idValue = $(this).attr("value")
            $(".studentDelete").attr("value", idValue)
        })
    </script>
    <script type="text/javascript" th:if="${studentFrameActive}">
        $(function(){
            $("#updateFrameIcon").on("click", function(ev){
                ev.stopPropagation();
                var x = document.getElementById("updateFrame");
                var y= document.getElementById("updateForm");
                if (x.style.display === "flex")
                    console.log("updateFrame is in flex display");
                x.style.display = "none";
                console.log("changed to none display");
                y.style.display = "flex"
            });

            $("body").on("click", function(){
                console.log("studentFram is active, clicked on body")
                var except2 = document.getElementById("updateFrameIcon")
                except2.addEventListener("click", function (ev) {
                    ev.stopPropagation(); //this is important! If removed, it will count to the function executed on body tag
                }, false);
                removeToggle();

                var except1 = document.getElementById("className")
                var except3 = document.getElementById("classNameInput")
                except1.addEventListener("click", function (ev) {
                    ev.stopPropagation(); //this is important! If removed, it will count to the function executed on body tag
                }, false);
                except3.addEventListener("click", function (ev) {
                    ev.stopPropagation(); //this is important! If removed, it will count to the function executed on body tag
                }, false);
            })
        });
    </script>
</div>

